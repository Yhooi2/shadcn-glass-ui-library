import React, { useState, createContext, useContext } from 'react';
import {
  AlertTriangle,
  ExternalLink,
  Users,
  Star,
  ChevronDown,
  ChevronUp,
  Sparkles,
  Clock,
  Flame,
  TrendingUp,
  Sprout,
  X,
  FolderGit2,
  Github,
  Search,
  Moon,
  Sun,
  Palette,
} from 'lucide-react';

// ========================================
// THEME CONTEXT & PROVIDER
// ========================================
const ThemeContext = createContext();

const themes = ['light', 'aurora', 'glass'];
const themeConfig = {
  light: { label: 'Light', icon: Sun },
  aurora: { label: 'Aurora', icon: Moon },
  glass: { label: 'Glass', icon: Palette },
};

export const useTheme = () => useContext(ThemeContext);

// ========================================
// CSS-IN-JS THEME VARIABLES (shadcn approach)
// ========================================
const themeStyles = {
  light: {
    // Background
    bgFrom: '#f1f5f9',
    bgVia: '#eff6ff',
    bgTo: '#f5f3ff',
    // Orbs
    orb1: 'rgba(96,165,250,0.20)',
    orb2: 'rgba(167,139,250,0.15)',
    orb3: 'rgba(34,211,238,0.15)',
    orb4: 'rgba(129,140,248,0.10)',
    // Glass
    glassSubtleBg: 'rgba(255,255,255,0.60)',
    glassMediumBg: 'rgba(255,255,255,0.70)',
    glassStrongBg: 'rgba(255,255,255,0.80)',
    glassSubtleBorder: 'rgba(255,255,255,0.50)',
    glassMediumBorder: 'rgba(255,255,255,0.60)',
    glassStrongBorder: 'rgba(255,255,255,0.70)',
    // Text
    textPrimary: '#1e293b',
    textSecondary: '#64748b',
    textMuted: '#94a3b8',
    textAccent: '#7c3aed',
    // Header
    headerBg: 'rgba(255,255,255,0.60)',
    headerBorder: 'rgba(255,255,255,0.80)',
    // Glow
    glowViolet: '0 8px 32px rgba(124,58,237,0.15), 0 0 0 1px rgba(124,58,237,0.1)',
    glowBlue: '0 8px 32px rgba(59,130,246,0.15), 0 0 0 1px rgba(59,130,246,0.1)',
    glowCyan: '0 8px 32px rgba(6,182,212,0.15), 0 0 0 1px rgba(6,182,212,0.1)',
    glowNeutral: '0 8px 32px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.05)',
    // Progress
    progressBg: 'rgba(226,232,240,0.60)',
    progressGlow: '0 0 8px rgba(124,58,237,0.3)',
    // Status
    statusGreen: '#10b981',
    statusYellow: '#f59e0b',
    statusRed: '#ef4444',
    // Metrics
    metricEmeraldBg: 'rgba(16,185,129,0.10)',
    metricEmeraldText: '#059669',
    metricEmeraldBorder: '#a7f3d0',
    metricAmberBg: 'rgba(245,158,11,0.10)',
    metricAmberText: '#d97706',
    metricAmberBorder: '#fde68a',
    metricBlueBg: 'rgba(59,130,246,0.10)',
    metricBlueText: '#2563eb',
    metricBlueBorder: '#bfdbfe',
    metricRedBg: 'rgba(239,68,68,0.10)',
    metricRedText: '#dc2626',
    metricRedBorder: '#fecaca',
    // Alerts
    alertDangerBg: 'rgba(239,68,68,0.05)',
    alertDangerBorder: 'rgba(254,202,202,0.6)',
    alertDangerText: '#b91c1c',
    alertWarningBg: 'rgba(245,158,11,0.05)',
    alertWarningBorder: 'rgba(253,230,138,0.6)',
    alertWarningText: '#b45309',
    // Cards
    cardBg: 'rgba(255,255,255,0.60)',
    cardBorder: 'rgba(226,232,240,0.60)',
    cardHoverBg: 'rgba(255,255,255,0.80)',
    expandedBg: 'rgba(255,255,255,0.70)',
    expandedBorder: 'rgba(139,92,246,0.5)',
    // Buttons
    btnSecondaryBg: 'rgba(255,255,255,0.80)',
    btnSecondaryText: '#334155',
    btnSecondaryBorder: '#e2e8f0',
    // Badges
    badgeDefaultBg: 'rgba(100,116,139,0.1)',
    badgeDefaultText: '#475569',
    badgeDefaultBorder: '#e2e8f0',
    badgeSuccessBg: 'rgba(16,185,129,0.1)',
    badgeSuccessText: '#047857',
    badgeSuccessBorder: '#a7f3d0',
    badgeWarningBg: 'rgba(245,158,11,0.1)',
    badgeWarningText: '#b45309',
    badgeWarningBorder: '#fde68a',
    badgePrimaryBg: 'rgba(59,130,246,0.1)',
    badgePrimaryText: '#1d4ed8',
    badgePrimaryBorder: '#bfdbfe',
    badgeVioletBg: 'rgba(139,92,246,0.1)',
    badgeVioletText: '#6d28d9',
    badgeVioletBorder: '#ddd6fe',
    // Search/Toggle
    searchBg: 'rgba(255,255,255,0.80)',
    searchBorder: 'rgba(226,232,240,0.8)',
    searchText: '#64748b',
    toggleText: '#64748b',
    // Icon button
    iconBtnFrom: '#1e293b',
    iconBtnTo: '#0f172a',
    iconBtnShadow: '0 4px 12px rgba(0,0,0,0.15)',
    iconBtnText: 'white',
    // Avatar
    avatarGlow: '0 8px 24px rgba(124,58,237,0.25)',
    onlineBorder: 'white',
    // Language bar
    langBarShadow: 'inset 0 1px 2px rgba(0,0,0,0.1)',
    // Grid
    gridColor: 'rgba(0,0,0,0.1)',
    gridOpacity: 0.015,
    // Footer
    footerText: 'rgba(148,163,184,0.6)',
  },

  aurora: {
    // Background - dark slate
    bgFrom: '#020617',
    bgVia: '#0f172a',
    bgTo: '#020617',
    // Orbs - subtle
    orb1: 'rgba(37,99,235,0.10)',
    orb2: 'rgba(124,58,237,0.08)',
    orb3: 'rgba(8,145,178,0.08)',
    orb4: 'rgba(79,70,229,0.06)',
    // Glass - slate based
    glassSubtleBg: 'rgba(30,41,59,0.40)',
    glassMediumBg: 'rgba(30,41,59,0.50)',
    glassStrongBg: 'rgba(30,41,59,0.60)',
    glassSubtleBorder: 'rgba(51,65,85,0.30)',
    glassMediumBorder: 'rgba(51,65,85,0.40)',
    glassStrongBorder: 'rgba(51,65,85,0.50)',
    // Text
    textPrimary: '#e2e8f0',
    textSecondary: '#94a3b8',
    textMuted: '#64748b',
    textAccent: '#a78bfa',
    // Header
    headerBg: 'rgba(15,23,42,0.60)',
    headerBorder: 'rgba(51,65,85,0.50)',
    // Glow
    glowViolet: '0 8px 32px rgba(124,58,237,0.12), inset 0 1px 0 rgba(255,255,255,0.05)',
    glowBlue: '0 8px 32px rgba(59,130,246,0.12), inset 0 1px 0 rgba(255,255,255,0.05)',
    glowCyan: '0 8px 32px rgba(6,182,212,0.12), inset 0 1px 0 rgba(255,255,255,0.05)',
    glowNeutral: '0 8px 32px rgba(0,0,0,0.30), inset 0 1px 0 rgba(255,255,255,0.05)',
    // Progress
    progressBg: 'rgba(51,65,85,0.50)',
    progressGlow: '0 0 12px rgba(124,58,237,0.4)',
    // Status
    statusGreen: '#34d399',
    statusYellow: '#fbbf24',
    statusRed: '#f87171',
    // Metrics
    metricEmeraldBg: 'rgba(16,185,129,0.10)',
    metricEmeraldText: '#34d399',
    metricEmeraldBorder: 'rgba(16,185,129,0.20)',
    metricAmberBg: 'rgba(245,158,11,0.10)',
    metricAmberText: '#fbbf24',
    metricAmberBorder: 'rgba(245,158,11,0.20)',
    metricBlueBg: 'rgba(59,130,246,0.10)',
    metricBlueText: '#60a5fa',
    metricBlueBorder: 'rgba(59,130,246,0.20)',
    metricRedBg: 'rgba(239,68,68,0.10)',
    metricRedText: '#f87171',
    metricRedBorder: 'rgba(239,68,68,0.20)',
    // Alerts
    alertDangerBg: 'rgba(239,68,68,0.10)',
    alertDangerBorder: 'rgba(239,68,68,0.20)',
    alertDangerText: '#f87171',
    alertWarningBg: 'rgba(245,158,11,0.10)',
    alertWarningBorder: 'rgba(245,158,11,0.20)',
    alertWarningText: '#fbbf24',
    // Cards
    cardBg: 'rgba(30,41,59,0.40)',
    cardBorder: 'rgba(51,65,85,0.40)',
    cardHoverBg: 'rgba(30,41,59,0.60)',
    expandedBg: 'rgba(30,41,59,0.40)',
    expandedBorder: 'rgba(139,92,246,0.50)',
    // Buttons
    btnSecondaryBg: 'rgba(51,65,85,0.60)',
    btnSecondaryText: '#e2e8f0',
    btnSecondaryBorder: 'rgba(71,85,105,0.50)',
    // Badges
    badgeDefaultBg: 'rgba(71,85,105,0.30)',
    badgeDefaultText: '#cbd5e1',
    badgeDefaultBorder: 'rgba(71,85,105,0.50)',
    badgeSuccessBg: 'rgba(16,185,129,0.20)',
    badgeSuccessText: '#34d399',
    badgeSuccessBorder: 'rgba(16,185,129,0.30)',
    badgeWarningBg: 'rgba(245,158,11,0.20)',
    badgeWarningText: '#fbbf24',
    badgeWarningBorder: 'rgba(245,158,11,0.30)',
    badgePrimaryBg: 'rgba(59,130,246,0.20)',
    badgePrimaryText: '#60a5fa',
    badgePrimaryBorder: 'rgba(59,130,246,0.30)',
    badgeVioletBg: 'rgba(139,92,246,0.20)',
    badgeVioletText: '#a78bfa',
    badgeVioletBorder: 'rgba(139,92,246,0.30)',
    // Search/Toggle
    searchBg: 'rgba(30,41,59,0.60)',
    searchBorder: 'rgba(51,65,85,0.50)',
    searchText: '#94a3b8',
    toggleText: '#fbbf24',
    // Icon button
    iconBtnFrom: '#334155',
    iconBtnTo: '#1e293b',
    iconBtnShadow: '0 4px 12px rgba(0,0,0,0.30)',
    iconBtnText: '#e2e8f0',
    // Avatar
    avatarGlow: '0 8px 24px rgba(124,58,237,0.25)',
    onlineBorder: '#0f172a',
    // Language bar
    langBarShadow: '0 0 8px rgba(124,58,237,0.15)',
    // Grid
    gridColor: 'rgba(255,255,255,0.05)',
    gridOpacity: 0.02,
    // Footer
    footerText: '#64748b',
  },

  glass: {
    // Background - purple glassmorphism
    bgFrom: '#0f172a',
    bgVia: '#581c87',
    bgTo: '#0f172a',
    // Orbs - vibrant animated
    orb1: 'rgba(168,85,247,0.30)',
    orb2: 'rgba(59,130,246,0.20)',
    orb3: 'rgba(236,72,153,0.20)',
    orb4: 'rgba(6,182,212,0.20)',
    orb5: 'rgba(139,92,246,0.10)',
    // Glass - white based for glassmorphism
    glassSubtleBg: 'rgba(255,255,255,0.10)',
    glassMediumBg: 'rgba(255,255,255,0.15)',
    glassStrongBg: 'rgba(255,255,255,0.25)',
    glassSubtleBorder: 'rgba(255,255,255,0.10)',
    glassMediumBorder: 'rgba(255,255,255,0.20)',
    glassStrongBorder: 'rgba(255,255,255,0.30)',
    // Text
    textPrimary: 'rgba(255,255,255,0.90)',
    textSecondary: 'rgba(255,255,255,0.60)',
    textMuted: 'rgba(255,255,255,0.40)',
    textAccent: '#c4b5fd',
    // Header
    headerBg: 'rgba(255,255,255,0.05)',
    headerBorder: 'rgba(255,255,255,0.10)',
    // Glow - intense
    glowViolet: '0 8px 32px rgba(147,51,234,0.30)',
    glowBlue: '0 8px 32px rgba(59,130,246,0.30)',
    glowCyan: '0 8px 32px rgba(6,182,212,0.25)',
    glowNeutral: '0 8px 32px rgba(0,0,0,0.12)',
    // Progress
    progressBg: 'rgba(255,255,255,0.10)',
    progressGlow: '0 0 16px rgba(147,51,234,0.4)',
    // Status
    statusGreen: '#34d399',
    statusYellow: '#fbbf24',
    statusRed: '#fb7185',
    // Metrics - with text glow
    metricEmeraldBg: 'transparent',
    metricEmeraldText: '#34d399',
    metricEmeraldBorder: 'transparent',
    metricEmeraldGlow: '0 0 12px rgba(52,211,153,0.4)',
    metricAmberBg: 'transparent',
    metricAmberText: '#fbbf24',
    metricAmberBorder: 'transparent',
    metricAmberGlow: '0 0 12px rgba(251,191,36,0.4)',
    metricBlueBg: 'transparent',
    metricBlueText: '#60a5fa',
    metricBlueBorder: 'transparent',
    metricBlueGlow: '0 0 12px rgba(96,165,250,0.4)',
    metricRedBg: 'transparent',
    metricRedText: '#fb7185',
    metricRedBorder: 'transparent',
    metricRedGlow: '0 0 12px rgba(251,113,133,0.4)',
    // Alerts
    alertDangerBg: 'rgba(251,113,133,0.10)',
    alertDangerBorder: 'rgba(251,113,133,0.20)',
    alertDangerText: '#fda4af',
    alertWarningBg: 'rgba(251,191,36,0.10)',
    alertWarningBorder: 'rgba(251,191,36,0.20)',
    alertWarningText: '#fcd34d',
    // Cards
    cardBg: 'rgba(255,255,255,0.05)',
    cardBorder: 'rgba(255,255,255,0.10)',
    cardHoverBg: 'rgba(255,255,255,0.07)',
    expandedBg: 'rgba(255,255,255,0.05)',
    expandedBorder: 'rgba(167,139,250,0.50)',
    // Buttons
    btnSecondaryBg: 'rgba(255,255,255,0.10)',
    btnSecondaryText: 'rgba(255,255,255,0.80)',
    btnSecondaryBorder: 'rgba(255,255,255,0.20)',
    // Badges
    badgeDefaultBg: 'rgba(255,255,255,0.20)',
    badgeDefaultText: 'rgba(255,255,255,0.90)',
    badgeDefaultBorder: 'transparent',
    badgeSuccessBg: 'rgba(52,211,153,0.20)',
    badgeSuccessText: '#6ee7b7',
    badgeSuccessBorder: 'transparent',
    badgeWarningBg: 'rgba(251,191,36,0.20)',
    badgeWarningText: '#fcd34d',
    badgeWarningBorder: 'transparent',
    badgePrimaryBg: 'rgba(96,165,250,0.20)',
    badgePrimaryText: '#93c5fd',
    badgePrimaryBorder: 'transparent',
    badgeVioletBg: 'rgba(167,139,250,0.20)',
    badgeVioletText: '#c4b5fd',
    badgeVioletBorder: 'transparent',
    // Search/Toggle
    searchBg: 'rgba(255,255,255,0.10)',
    searchBorder: 'rgba(255,255,255,0.10)',
    searchText: 'rgba(255,255,255,0.70)',
    toggleText: 'rgba(255,255,255,0.60)',
    // Icon button - purple gradient
    iconBtnFrom: '#8b5cf6',
    iconBtnTo: '#9333ea',
    iconBtnShadow: '0 0 12px rgba(147,51,234,0.50)',
    iconBtnText: 'white',
    // Avatar
    avatarGlow: '0 0 24px rgba(147,51,234,0.50)',
    onlineBorder: '#0f172a',
    // Language bar
    langBarShadow: '0 0 12px rgba(147,51,234,0.30)',
    // Grid
    gridColor: 'rgba(255,255,255,0.05)',
    gridOpacity: 0.03,
    // Footer
    footerText: 'rgba(255,255,255,0.30)',
  },
};

// ========================================
// GLASS CARD COMPONENT
// ========================================
const GlassCard = ({ children, className = '', intensity = 'medium', glow = null }) => {
  const { theme } = useTheme();
  const t = themeStyles[theme];

  const bgMap = { subtle: t.glassSubtleBg, medium: t.glassMediumBg, strong: t.glassStrongBg };
  const borderMap = {
    subtle: t.glassSubtleBorder,
    medium: t.glassMediumBorder,
    strong: t.glassStrongBorder,
  };
  const blurMap = { subtle: '8px', medium: '12px', strong: '16px' };

  const glowMap = {
    blue: t.glowBlue,
    violet: t.glowViolet,
    purple: t.glowViolet,
    cyan: t.glowCyan,
    null: t.glowNeutral,
  };

  return (
    <div
      className={`border rounded-2xl transition-all duration-300 ${className}`}
      style={{
        background: bgMap[intensity],
        borderColor: borderMap[intensity],
        backdropFilter: `blur(${blurMap[intensity]})`,
        WebkitBackdropFilter: `blur(${blurMap[intensity]})`,
        boxShadow: glowMap[glow] || t.glowNeutral,
      }}
    >
      {children}
    </div>
  );
};

// ========================================
// PROGRESS BAR COMPONENT
// ========================================
const GlassProgress = ({ value, gradient = 'from-blue-500 to-violet-500', className = '' }) => {
  const { theme } = useTheme();
  const t = themeStyles[theme];

  return (
    <div
      className={`h-2 rounded-full overflow-hidden transition-all duration-300 ${className}`}
      style={{ background: t.progressBg }}
    >
      <div
        className={`h-full bg-gradient-to-r ${gradient} rounded-full transition-all duration-700`}
        style={{ width: `${value}%`, boxShadow: t.progressGlow }}
      />
    </div>
  );
};

// ========================================
// STATUS INDICATOR
// ========================================
const StatusIndicator = ({ type }) => {
  const { theme } = useTheme();
  const t = themeStyles[theme];
  const colors = { green: t.statusGreen, yellow: t.statusYellow, red: t.statusRed };
  const glows = {
    green: '0 0 8px rgba(52,211,153,0.6)',
    yellow: '0 0 8px rgba(251,191,36,0.6)',
    red: '0 0 8px rgba(248,113,113,0.6)',
  };

  return (
    <div
      className="w-2.5 h-2.5 rounded-full transition-all duration-300"
      style={{ backgroundColor: colors[type], boxShadow: glows[type] }}
    />
  );
};

// ========================================
// BADGE COMPONENT
// ========================================
const GlassBadge = ({ children, variant = 'default' }) => {
  const { theme } = useTheme();
  const t = themeStyles[theme];

  const variantMap = {
    default: { bg: t.badgeDefaultBg, text: t.badgeDefaultText, border: t.badgeDefaultBorder },
    success: { bg: t.badgeSuccessBg, text: t.badgeSuccessText, border: t.badgeSuccessBorder },
    warning: { bg: t.badgeWarningBg, text: t.badgeWarningText, border: t.badgeWarningBorder },
    primary: { bg: t.badgePrimaryBg, text: t.badgePrimaryText, border: t.badgePrimaryBorder },
    violet: { bg: t.badgeVioletBg, text: t.badgeVioletText, border: t.badgeVioletBorder },
  };

  const v = variantMap[variant] || variantMap.default;

  return (
    <span
      className="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border backdrop-blur-sm transition-all duration-300"
      style={{ backgroundColor: v.bg, color: v.text, borderColor: v.border }}
    >
      {children}
    </span>
  );
};

// ========================================
// MAIN COMPONENT
// ========================================
function GitHubAnalyticsContent() {
  const { theme, cycleTheme } = useTheme();
  const t = themeStyles[theme];

  const [flagsExpanded, setFlagsExpanded] = useState(false);
  const [showFlaggedOnly, setShowFlaggedOnly] = useState(false);
  const [selectedYear, setSelectedYear] = useState(null);
  const [expandedYear, setExpandedYear] = useState(null);
  const [expandedRepo, setExpandedRepo] = useState(null);

  const years = [
    {
      year: 2025,
      label: 'Peak',
      icon: Flame,
      commits: 629,
      prs: 43,
      repos: 5,
      percent: 70,
      gradient: theme === 'glass' ? 'from-orange-400 to-rose-500' : 'from-amber-500 to-orange-500',
      glow: 'amber',
    },
    {
      year: 2024,
      label: 'Growth',
      icon: TrendingUp,
      commits: 901,
      prs: 0,
      repos: 3,
      percent: 100,
      gradient: 'from-emerald-500 to-cyan-500',
      glow: 'emerald',
    },
    {
      year: 2023,
      label: 'Start',
      icon: Sprout,
      commits: 712,
      prs: 4,
      repos: 5,
      percent: 79,
      gradient: 'from-blue-500 to-indigo-500',
      glow: 'blue',
    },
  ];

  const repos = [
    {
      name: 'Wildhaven-website',
      languages: 'JS 88% · Shell 11%',
      commits: 240,
      contribution: 75,
      stars: 1,
      flagType: 'green',
      issues: [],
      createdYear: 2024,
    },
    {
      name: 'study',
      languages: 'Python 92% · C 5%',
      commits: 177,
      contribution: 100,
      stars: 2,
      flagType: 'yellow',
      issues: ['Uneven activity (3 burst days)'],
      createdYear: 2023,
    },
    {
      name: 'bot-scripts',
      languages: 'Python 100%',
      commits: 89,
      contribution: 100,
      stars: 0,
      flagType: 'red',
      issues: ['Empty commits (avg 3 lines)', 'Burst: 67 commits on Oct 15'],
      createdYear: 2023,
    },
    {
      name: 'portfolio',
      languages: 'TypeScript 78% · CSS 22%',
      commits: 134,
      contribution: 100,
      stars: 0,
      flagType: 'green',
      issues: [],
      createdYear: 2025,
    },
    {
      name: 'git-course',
      languages: 'C++ 100%',
      commits: 150,
      contribution: 100,
      stars: 2,
      flagType: 'green',
      issues: [],
      createdYear: 2024,
    },
    {
      name: 'nextjs-app',
      languages: 'TypeScript 95%',
      commits: 56,
      contribution: 100,
      stars: 0,
      flagType: 'green',
      issues: [],
      createdYear: 2025,
    },
  ];

  const getFilteredRepos = () => {
    let filtered = repos;
    if (showFlaggedOnly) filtered = filtered.filter((r) => r.flagType !== 'green');
    if (selectedYear) filtered = filtered.filter((r) => r.createdYear === selectedYear);
    return filtered;
  };

  const filteredRepos = getFilteredRepos();

  const handleYearClick = (year) => {
    if (expandedYear === year) {
      setExpandedYear(null);
      setSelectedYear(null);
    } else {
      setExpandedYear(year);
    }
  };

  const handleYearSelect = (year) => {
    setSelectedYear(selectedYear === year ? null : year);
  };

  const clearFilters = () => {
    setSelectedYear(null);
    setShowFlaggedOnly(false);
    setFlagsExpanded(false);
    setExpandedYear(null);
  };

  const ThemeIcon = themeConfig[theme].icon;

  return (
    <div className="min-h-screen font-['Inter',system-ui,sans-serif] relative overflow-hidden">
      {/* Background */}
      <div
        className="fixed inset-0 transition-all duration-500"
        style={{
          background: `linear-gradient(to bottom right, ${t.bgFrom}, ${t.bgVia}, ${t.bgTo})`,
        }}
      >
        {/* Orbs */}
        {theme === 'glass' ? (
          <>
            <div
              className="absolute top-20 -left-20 w-72 h-72 rounded-full blur-3xl animate-pulse"
              style={{ background: t.orb1 }}
            />
            <div
              className="absolute top-1/3 -right-20 w-96 h-96 rounded-full blur-3xl"
              style={{ background: t.orb2 }}
            />
            <div
              className="absolute bottom-20 left-1/4 w-64 h-64 rounded-full blur-3xl animate-pulse"
              style={{ background: t.orb3, animationDelay: '1s' }}
            />
            <div
              className="absolute bottom-1/3 right-1/4 w-48 h-48 rounded-full blur-3xl"
              style={{ background: t.orb4 }}
            />
            <div
              className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] rounded-full blur-3xl"
              style={{ background: t.orb5 }}
            />
          </>
        ) : (
          <>
            <div
              className="absolute top-10 -left-32 w-96 h-96 rounded-full blur-3xl transition-all duration-500"
              style={{ background: t.orb1 }}
            />
            <div
              className="absolute top-1/4 -right-32 w-[500px] h-[500px] rounded-full blur-3xl transition-all duration-500"
              style={{ background: t.orb2 }}
            />
            <div
              className="absolute bottom-10 left-1/3 w-80 h-80 rounded-full blur-3xl transition-all duration-500"
              style={{ background: t.orb3 }}
            />
            <div
              className="absolute bottom-1/4 right-1/4 w-64 h-64 rounded-full blur-3xl transition-all duration-500"
              style={{ background: t.orb4 }}
            />
          </>
        )}

        {/* Grid */}
        <div
          className="absolute inset-0 transition-opacity duration-500"
          style={{
            opacity: t.gridOpacity,
            backgroundImage: `linear-gradient(${t.gridColor} 1px, transparent 1px), linear-gradient(90deg, ${t.gridColor} 1px, transparent 1px)`,
            backgroundSize: '32px 32px',
          }}
        />
      </div>

      {/* Content */}
      <div className="relative z-10">
        {/* Header */}
        <div
          className="sticky top-0 z-50 backdrop-blur-xl border-b transition-all duration-300"
          style={{ background: t.headerBg, borderColor: t.headerBorder }}
        >
          <div className="px-4 py-3 flex items-center justify-between">
            <div className="flex items-center gap-2.5">
              <div
                className="w-9 h-9 rounded-xl flex items-center justify-center transition-all duration-300"
                style={{
                  background: `linear-gradient(to bottom right, ${t.iconBtnFrom}, ${t.iconBtnTo})`,
                  boxShadow: t.iconBtnShadow,
                }}
              >
                <Github className="w-5 h-5" style={{ color: t.iconBtnText }} />
              </div>
              <span
                className="font-semibold transition-colors duration-300"
                style={{ color: t.textPrimary }}
              >
                {theme === 'glass' ? 'Analytics' : 'User Analytics'}
              </span>
            </div>
            <div className="flex items-center gap-2">
              <div
                className="flex items-center backdrop-blur-sm rounded-xl px-3 py-1.5 border transition-all duration-300"
                style={{ background: t.searchBg, borderColor: t.searchBorder }}
              >
                <Search
                  className="w-3.5 h-3.5 mr-2 transition-colors duration-300"
                  style={{ color: t.textMuted }}
                />
                <span
                  className="text-sm transition-colors duration-300"
                  style={{ color: t.searchText }}
                >
                  Yhooi2
                </span>
              </div>
              <button
                onClick={cycleTheme}
                className="w-9 h-9 rounded-xl flex items-center justify-center transition-all duration-300 border"
                style={{ background: t.searchBg, borderColor: t.searchBorder, color: t.toggleText }}
                title={`Switch to ${themeConfig[themes[(themes.indexOf(theme) + 1) % themes.length]].label}`}
              >
                <ThemeIcon className="w-4 h-4" />
              </button>
            </div>
          </div>
        </div>

        <div className="p-4 space-y-4">
          {/* Profile Card */}
          <GlassCard intensity="strong" glow="violet" className="p-5">
            <div className="flex items-start gap-4">
              <div className="relative">
                <div
                  className="w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 via-violet-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold transition-shadow duration-300"
                  style={{ boxShadow: t.avatarGlow }}
                >
                  AS
                </div>
                <div
                  className="absolute -bottom-1 -right-1 w-5 h-5 bg-emerald-400 rounded-full transition-all duration-300"
                  style={{
                    borderWidth: '2px',
                    borderColor: t.onlineBorder,
                    boxShadow: '0 0 8px rgba(52,211,153,0.5)',
                  }}
                />
              </div>
              <div className="flex-1 min-w-0">
                <h1
                  className="text-xl font-bold truncate transition-colors duration-300"
                  style={{ color: t.textPrimary }}
                >
                  Artem Safronov
                </h1>
                <div
                  className="flex items-center gap-1.5 text-sm mt-0.5 transition-colors duration-300"
                  style={{ color: t.textSecondary }}
                >
                  <span style={{ color: t.textAccent }}>@Yhooi2</span>
                  <ExternalLink className="w-3 h-3" />
                </div>
                <div
                  className="text-xs mt-1 transition-colors duration-300"
                  style={{ color: t.textMuted }}
                >
                  Joined January 2023
                </div>
              </div>
            </div>

            {/* Stats */}
            <div className="flex items-center gap-4 mt-4 text-sm">
              {[
                { icon: FolderGit2, color: '#a78bfa', value: '11', label: 'repos' },
                { icon: Users, color: '#60a5fa', value: '1', label: 'follower' },
                { icon: Users, color: '#22d3ee', value: '5', label: 'following' },
              ].map((s, i) => (
                <span
                  key={i}
                  className="flex items-center gap-1.5 transition-colors duration-300"
                  style={{ color: t.textSecondary }}
                >
                  <s.icon className="w-4 h-4" style={{ color: s.color }} />
                  <span className="font-semibold" style={{ color: t.textPrimary }}>
                    {s.value}
                  </span>{' '}
                  {s.label}
                </span>
              ))}
            </div>

            {/* Language bar */}
            <div className="mt-4">
              <div
                className="flex h-2.5 rounded-full overflow-hidden transition-shadow duration-300"
                style={{ boxShadow: t.langBarShadow }}
              >
                <div
                  className="bg-gradient-to-r from-blue-400 to-blue-500"
                  style={{ width: '56%' }}
                />
                <div
                  className="bg-gradient-to-r from-orange-400 to-orange-500"
                  style={{ width: '22%' }}
                />
                <div
                  className="bg-gradient-to-r from-yellow-300 to-yellow-400"
                  style={{ width: '13%' }}
                />
                <div
                  className="bg-gradient-to-r from-emerald-400 to-emerald-500"
                  style={{ width: '9%' }}
                />
              </div>
              <div className="flex flex-wrap gap-x-3 gap-y-1 mt-2.5 text-xs">
                {[
                  { name: theme === 'glass' ? 'TS' : 'TypeScript', pct: 56, color: 'bg-blue-400' },
                  { name: 'HTML', pct: 22, color: 'bg-orange-400' },
                  {
                    name: theme === 'glass' ? 'JS' : 'JavaScript',
                    pct: 13,
                    color: 'bg-yellow-400',
                  },
                ].map((l) => (
                  <span
                    key={l.name}
                    className="flex items-center gap-1.5 transition-colors duration-300"
                    style={{ color: t.textSecondary }}
                  >
                    <span className={`w-2 h-2 rounded-sm ${l.color}`} />
                    {l.name} {l.pct}%
                  </span>
                ))}
                <span style={{ color: t.textMuted }}>+5</span>
              </div>
            </div>
          </GlassCard>

          {/* AI Summary CTA */}
          <GlassCard
            intensity="medium"
            glow="blue"
            className={`p-4 ${theme === 'glass' ? 'bg-gradient-to-r from-violet-500/20 to-indigo-500/20' : ''}`}
          >
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-2.5">
                <div
                  className="w-10 h-10 rounded-xl bg-gradient-to-br from-violet-400 to-purple-500 flex items-center justify-center"
                  style={{ boxShadow: '0 0 16px rgba(147,51,234,0.5)' }}
                >
                  <Sparkles className="w-5 h-5 text-white" />
                </div>
                <div>
                  <span
                    className="font-semibold block transition-colors duration-300"
                    style={{ color: t.textPrimary }}
                  >
                    AI Summary
                  </span>
                  <span
                    className="text-xs flex items-center gap-1 transition-colors duration-300"
                    style={{ color: t.textMuted }}
                  >
                    <Clock className="w-3 h-3" /> ~30 sec
                  </span>
                </div>
              </div>
              <button className="px-5 py-2.5 bg-gradient-to-r from-violet-500 to-purple-600 text-white text-sm font-medium rounded-xl shadow-[0_4px_20px_rgba(147,51,234,0.4)] hover:shadow-[0_4px_24px_rgba(147,51,234,0.6)] transition-shadow flex items-center gap-2">
                <Sparkles className="w-4 h-4" />
                Generate
              </button>
            </div>
          </GlassCard>

          {/* Trust Score */}
          <GlassCard intensity="strong" glow="cyan" className="p-5">
            <div className="flex items-center justify-between mb-3">
              <span
                className="font-semibold transition-colors duration-300"
                style={{ color: t.textPrimary }}
              >
                Trust Score
              </span>
              <div className="flex items-baseline gap-1">
                <span className="text-3xl font-bold bg-gradient-to-r from-amber-300 via-emerald-300 to-cyan-300 bg-clip-text text-transparent">
                  72
                </span>
                <span
                  className="text-sm transition-colors duration-300"
                  style={{ color: t.textMuted }}
                >
                  /100
                </span>
              </div>
            </div>
            <GlassProgress
              value={72}
              gradient="from-amber-400 via-emerald-400 to-cyan-400"
              className="h-3 mb-5"
            />

            <div className="grid grid-cols-4 gap-3">
              {[
                {
                  label: theme === 'glass' ? 'Reg' : 'Regularity',
                  value: 84,
                  bg: t.metricEmeraldBg,
                  text: t.metricEmeraldText,
                  border: t.metricEmeraldBorder,
                  glow: t.metricEmeraldGlow,
                },
                {
                  label: theme === 'glass' ? 'Imp' : 'Impact',
                  value: 45,
                  bg: t.metricAmberBg,
                  text: t.metricAmberText,
                  border: t.metricAmberBorder,
                  glow: t.metricAmberGlow,
                },
                {
                  label: theme === 'glass' ? 'Div' : 'Diversity',
                  value: 78,
                  bg: t.metricBlueBg,
                  text: t.metricBlueText,
                  border: t.metricBlueBorder,
                  glow: t.metricBlueGlow,
                },
                {
                  label: 'Collab',
                  value: 12,
                  bg: t.metricRedBg,
                  text: t.metricRedText,
                  border: t.metricRedBorder,
                  glow: t.metricRedGlow,
                },
              ].map((m) => (
                <div
                  key={m.label}
                  className="text-center p-2.5 rounded-xl border transition-all duration-300"
                  style={{ backgroundColor: m.bg, borderColor: m.border }}
                >
                  <div
                    className="text-xl font-bold transition-all duration-300"
                    style={{ color: m.text, textShadow: theme === 'glass' ? m.glow : 'none' }}
                  >
                    {m.value}
                  </div>
                  <div
                    className="text-[10px] mt-0.5 font-medium uppercase tracking-wide transition-colors duration-300"
                    style={{ color: t.textMuted }}
                  >
                    {m.label}
                  </div>
                </div>
              ))}
            </div>
          </GlassCard>

          {/* Active Filters */}
          {(selectedYear || showFlaggedOnly) && (
            <div className="flex items-center gap-2 flex-wrap">
              {selectedYear && (
                <GlassBadge variant="primary">
                  Year: {selectedYear}
                  <button onClick={() => setSelectedYear(null)} className="ml-1.5">
                    <X className="w-3 h-3" />
                  </button>
                </GlassBadge>
              )}
              {showFlaggedOnly && (
                <GlassBadge variant="warning">
                  Flagged only
                  <button
                    onClick={() => {
                      setShowFlaggedOnly(false);
                      setFlagsExpanded(false);
                    }}
                    className="ml-1.5"
                  >
                    <X className="w-3 h-3" />
                  </button>
                </GlassBadge>
              )}
              <button
                onClick={clearFilters}
                className="text-xs underline transition-colors duration-300"
                style={{ color: t.textMuted }}
              >
                Clear all
              </button>
            </div>
          )}

          {/* Flags Section */}
          <GlassCard intensity="medium" className="overflow-hidden">
            <button
              className="w-full p-4 flex items-center justify-between transition-colors"
              onClick={() => {
                setFlagsExpanded(!flagsExpanded);
                if (!flagsExpanded) setShowFlaggedOnly(true);
                else setShowFlaggedOnly(false);
              }}
            >
              <div className="flex items-center gap-2.5">
                <div
                  className="w-8 h-8 rounded-lg flex items-center justify-center"
                  style={{ background: 'rgba(245,158,11,0.2)' }}
                >
                  <AlertTriangle className="w-4 h-4" style={{ color: t.statusYellow }} />
                </div>
                <span
                  className="font-semibold transition-colors duration-300"
                  style={{ color: t.textPrimary }}
                >
                  2 flags detected
                </span>
              </div>
              {flagsExpanded ? (
                <ChevronUp className="w-5 h-5" style={{ color: t.textMuted }} />
              ) : (
                <ChevronDown className="w-5 h-5" style={{ color: t.textMuted }} />
              )}
            </button>

            {flagsExpanded && (
              <div
                className="px-4 pb-4 space-y-2 border-t pt-3 transition-colors duration-300"
                style={{ borderColor: theme === 'glass' ? 'rgba(255,255,255,0.1)' : t.cardBorder }}
              >
                <div
                  className="p-3 rounded-xl border backdrop-blur-sm"
                  style={{ background: t.alertDangerBg, borderColor: t.alertDangerBorder }}
                >
                  <div
                    className="flex items-center gap-2 font-medium text-sm"
                    style={{ color: t.alertDangerText }}
                  >
                    <div
                      className="w-2 h-2 rounded-full"
                      style={{
                        backgroundColor: t.statusRed,
                        boxShadow: '0 0 8px rgba(251,113,133,0.6)',
                      }}
                    />
                    No collaboration
                  </div>
                  <p
                    className="text-xs mt-1 ml-4"
                    style={{
                      color: theme === 'glass' ? 'rgba(254,205,211,0.6)' : t.alertDangerText,
                      opacity: 0.7,
                    }}
                  >
                    0 PRs to external repos
                  </p>
                </div>
                <div
                  className="p-3 rounded-xl border backdrop-blur-sm"
                  style={{ background: t.alertWarningBg, borderColor: t.alertWarningBorder }}
                >
                  <div
                    className="flex items-center gap-2 font-medium text-sm"
                    style={{ color: t.alertWarningText }}
                  >
                    <div
                      className="w-2 h-2 rounded-full"
                      style={{
                        backgroundColor: t.statusYellow,
                        boxShadow: '0 0 8px rgba(251,191,36,0.6)',
                      }}
                    />
                    Burst activity
                  </div>
                  <p
                    className="text-xs mt-1 ml-4"
                    style={{
                      color: theme === 'glass' ? 'rgba(253,230,138,0.6)' : t.alertWarningText,
                      opacity: 0.7,
                    }}
                  >
                    3 days with 50+ commits
                  </p>
                </div>
              </div>
            )}
          </GlassCard>

          {/* Career Stats */}
          <GlassCard intensity="medium" className="p-4">
            <h3
              className="font-semibold mb-1 transition-colors duration-300"
              style={{ color: t.textPrimary }}
            >
              Career Stats
            </h3>
            <p
              className="text-sm mb-4 transition-colors duration-300"
              style={{ color: t.textMuted }}
            >
              2,242 commits · 47 PRs · 11 repos
            </p>

            <div className="space-y-2">
              {years.map((y) => {
                const Icon = y.icon;
                const isExpanded = expandedYear === y.year;
                const isSelected = selectedYear === y.year;

                return (
                  <div key={y.year}>
                    <div
                      className={`rounded-xl p-3.5 cursor-pointer transition-all duration-300 ${isSelected ? `bg-gradient-to-r ${y.gradient}` : ''}`}
                      style={
                        !isSelected
                          ? { background: t.cardBg, borderWidth: '1px', borderColor: t.cardBorder }
                          : { boxShadow: '0 4px 20px rgba(147,51,234,0.3)' }
                      }
                      onClick={() => handleYearClick(y.year)}
                    >
                      <div className="flex items-center justify-between mb-2">
                        <div className="flex items-center gap-2">
                          <span
                            className={`font-bold ${isSelected ? 'text-white' : ''}`}
                            style={!isSelected ? { color: t.textPrimary } : {}}
                          >
                            {y.year}
                          </span>
                          <Icon
                            className={`w-4 h-4 ${isSelected ? 'text-white' : ''}`}
                            style={!isSelected ? { color: t.textMuted } : {}}
                          />
                          <span
                            className={`text-xs ${isSelected ? 'text-white/80' : ''}`}
                            style={!isSelected ? { color: t.textMuted } : {}}
                          >
                            {y.label}
                          </span>
                        </div>
                        <div className="flex items-center gap-2">
                          <span
                            className={`text-sm font-semibold ${isSelected ? 'text-white' : ''}`}
                            style={!isSelected ? { color: t.textPrimary } : {}}
                          >
                            {y.commits}
                          </span>
                          {isExpanded ? (
                            <ChevronUp
                              className={`w-4 h-4 ${isSelected ? 'text-white/70' : ''}`}
                              style={!isSelected ? { color: t.textMuted } : {}}
                            />
                          ) : (
                            <ChevronDown
                              className={`w-4 h-4 ${isSelected ? 'text-white/70' : ''}`}
                              style={!isSelected ? { color: t.textMuted } : {}}
                            />
                          )}
                        </div>
                      </div>
                      <div
                        className="h-2 rounded-full overflow-hidden"
                        style={{ background: isSelected ? 'rgba(255,255,255,0.2)' : t.progressBg }}
                      >
                        <div
                          className={`h-full rounded-full transition-all ${isSelected ? 'bg-white/90' : `bg-gradient-to-r ${y.gradient}`}`}
                          style={{ width: `${y.percent}%` }}
                        />
                      </div>
                    </div>

                    {isExpanded && (
                      <div
                        className="mt-2 ml-3 p-4 rounded-xl border-l-2 backdrop-blur-sm"
                        style={{ background: t.expandedBg, borderColor: t.expandedBorder }}
                      >
                        <div className="grid grid-cols-3 gap-4 text-center mb-4">
                          {[
                            { val: y.commits, label: 'Commits' },
                            { val: y.prs, label: 'PRs' },
                            { val: y.repos, label: 'Repos' },
                          ].map((s) => (
                            <div key={s.label}>
                              <div
                                className="text-xl font-bold transition-colors duration-300"
                                style={{ color: t.textPrimary }}
                              >
                                {s.val}
                              </div>
                              <div
                                className="text-xs transition-colors duration-300"
                                style={{ color: t.textMuted }}
                              >
                                {s.label}
                              </div>
                            </div>
                          ))}
                        </div>
                        <button
                          className={`w-full py-2.5 text-sm font-medium rounded-xl transition-all ${!isSelected ? `bg-gradient-to-r ${y.gradient} text-white shadow-[0_4px_16px_rgba(147,51,234,0.3)]` : ''}`}
                          style={
                            isSelected
                              ? {
                                  background:
                                    theme === 'glass' ? 'rgba(255,255,255,0.2)' : t.btnSecondaryBg,
                                  color: theme === 'glass' ? 'white' : t.btnSecondaryText,
                                  borderWidth: '1px',
                                  borderColor:
                                    theme === 'glass'
                                      ? 'rgba(255,255,255,0.3)'
                                      : t.btnSecondaryBorder,
                                }
                              : {}
                          }
                          onClick={(e) => {
                            e.stopPropagation();
                            handleYearSelect(y.year);
                          }}
                        >
                          {isSelected ? `✓ Showing ${y.year}` : `Show repos from ${y.year}`}
                        </button>
                      </div>
                    )}
                  </div>
                );
              })}
            </div>
          </GlassCard>

          {/* Projects */}
          <GlassCard intensity="medium" className="p-4">
            <div className="flex items-center justify-between mb-4">
              <div className="flex items-center gap-2">
                {showFlaggedOnly ? (
                  <AlertTriangle className="w-4 h-4" style={{ color: t.statusYellow }} />
                ) : (
                  <FolderGit2 className="w-4 h-4" style={{ color: t.textAccent }} />
                )}
                <h3
                  className="font-semibold transition-colors duration-300"
                  style={{ color: t.textPrimary }}
                >
                  {showFlaggedOnly ? 'Flagged' : selectedYear ? `${selectedYear}` : 'All'} Projects
                </h3>
                <GlassBadge variant="violet">{filteredRepos.length}</GlassBadge>
              </div>
            </div>

            {filteredRepos.length === 0 ? (
              <div className="text-center py-10">
                <div
                  className="w-16 h-16 mx-auto mb-3 rounded-2xl flex items-center justify-center"
                  style={{ background: t.cardBg }}
                >
                  <FolderGit2 className="w-8 h-8" style={{ color: t.textMuted }} />
                </div>
                <p
                  className="text-sm transition-colors duration-300"
                  style={{ color: t.textMuted }}
                >
                  No repositories found
                </p>
                <button
                  onClick={clearFilters}
                  className="mt-2 text-sm underline"
                  style={{ color: t.textAccent }}
                >
                  Clear filters
                </button>
              </div>
            ) : (
              <div className="space-y-2">
                {filteredRepos.map((repo, i) => (
                  <div
                    key={repo.name}
                    className="rounded-xl overflow-hidden border transition-all duration-300"
                    style={{ background: t.cardBg, borderColor: t.cardBorder }}
                  >
                    <div
                      className="p-3.5 cursor-pointer"
                      onClick={() => setExpandedRepo(expandedRepo === i ? null : i)}
                    >
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-2.5">
                          <span
                            className="font-medium text-sm transition-colors duration-300"
                            style={{ color: t.textPrimary }}
                          >
                            {repo.name}
                          </span>
                          <StatusIndicator type={repo.flagType} />
                        </div>
                        <div className="flex items-center gap-2">
                          {repo.stars > 0 && (
                            <span
                              className="flex items-center gap-1 text-xs"
                              style={{ color: t.statusYellow }}
                            >
                              <Star className="w-3 h-3" />
                              {repo.stars}
                            </span>
                          )}
                          {expandedRepo === i ? (
                            <ChevronUp className="w-4 h-4" style={{ color: t.textMuted }} />
                          ) : (
                            <ChevronDown className="w-4 h-4" style={{ color: t.textMuted }} />
                          )}
                        </div>
                      </div>
                      <div
                        className="text-xs mt-1.5 transition-colors duration-300"
                        style={{ color: t.textMuted }}
                      >
                        {repo.languages}
                      </div>
                      <div
                        className="text-xs mt-0.5 transition-colors duration-300"
                        style={{ color: t.textSecondary }}
                      >
                        {repo.commits} commits · {repo.contribution}%
                      </div>
                    </div>

                    {expandedRepo === i && (
                      <div
                        className="border-t p-3.5 space-y-3"
                        style={{
                          borderColor: t.cardBorder,
                          background: theme === 'glass' ? 'rgba(255,255,255,0.03)' : t.expandedBg,
                        }}
                      >
                        {repo.issues.length > 0 && (
                          <div
                            className="p-3 rounded-xl border"
                            style={{
                              background: t.alertDangerBg,
                              borderColor: t.alertDangerBorder,
                            }}
                          >
                            <div
                              className="text-xs font-semibold flex items-center gap-1.5 mb-1.5"
                              style={{ color: t.alertDangerText }}
                            >
                              <AlertTriangle className="w-3.5 h-3.5" />
                              Issues
                            </div>
                            {repo.issues.map((issue, j) => (
                              <div
                                key={j}
                                className="text-xs"
                                style={{ color: t.alertDangerText, opacity: 0.7 }}
                              >
                                • {issue}
                              </div>
                            ))}
                          </div>
                        )}

                        <div className="grid grid-cols-2 gap-2">
                          {[
                            {
                              title: theme === 'glass' ? 'Your' : 'Your Contribution',
                              val: repo.commits,
                              sub: `${repo.contribution}%`,
                            },
                            {
                              title: theme === 'glass' ? 'Project' : 'Full Project',
                              val: Math.round(repo.commits / (repo.contribution / 100)),
                              sub: `~${Math.round(repo.commits * 12)} lines`,
                            },
                          ].map((c) => (
                            <div
                              key={c.title}
                              className="p-2.5 rounded-lg border"
                              style={{ background: t.cardBg, borderColor: t.cardBorder }}
                            >
                              <div
                                className="text-xs transition-colors duration-300"
                                style={{ color: t.textMuted }}
                              >
                                {c.title}
                              </div>
                              <div
                                className="font-semibold transition-colors duration-300"
                                style={{ color: t.textPrimary }}
                              >
                                {c.val} commits
                              </div>
                              <div
                                className="text-xs transition-colors duration-300"
                                style={{ color: t.textMuted }}
                              >
                                {c.sub}
                              </div>
                            </div>
                          ))}
                        </div>

                        <div className="flex gap-2">
                          <button
                            className="flex-1 py-2.5 text-xs font-medium rounded-xl flex items-center justify-center gap-1.5 border transition-all"
                            style={{
                              background: t.btnSecondaryBg,
                              color: t.btnSecondaryText,
                              borderColor: t.btnSecondaryBorder,
                            }}
                          >
                            <ExternalLink className="w-3.5 h-3.5" />
                            GitHub
                          </button>
                          <button className="flex-1 py-2.5 text-xs font-medium text-white bg-gradient-to-r from-violet-500 to-purple-600 rounded-xl flex items-center justify-center gap-1.5 shadow-[0_4px_16px_rgba(147,51,234,0.4)] hover:shadow-[0_4px_20px_rgba(147,51,234,0.5)] transition">
                            <Sparkles className="w-3.5 h-3.5" />
                            AI Analysis
                          </button>
                        </div>
                      </div>
                    )}
                  </div>
                ))}
              </div>
            )}
          </GlassCard>

          {/* Footer */}
          <div
            className="text-center text-xs py-6 transition-colors duration-300"
            style={{ color: t.footerText }}
          >
            GitHub Analytics · {themeConfig[theme].label} Theme
          </div>
        </div>
      </div>
    </div>
  );
}

// ========================================
// MAIN EXPORT WITH THEME PROVIDER
// ========================================
export default function GitHubAnalyticsTripleTheme() {
  const [theme, setTheme] = useState('glass');

  const cycleTheme = () => {
    const currentIndex = themes.indexOf(theme);
    const nextIndex = (currentIndex + 1) % themes.length;
    setTheme(themes[nextIndex]);
  };

  return (
    <ThemeContext.Provider value={{ theme, setTheme, cycleTheme }}>
      <GitHubAnalyticsContent />
    </ThemeContext.Provider>
  );
}
