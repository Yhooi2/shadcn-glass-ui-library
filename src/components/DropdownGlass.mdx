import { Meta, Canvas, ArgTypes, Controls } from '@storybook/blocks';
import * as DropdownGlassStories from './DropdownGlass.stories';

<Meta of={DropdownGlassStories} />

# DropdownGlass

Glassmorphism dropdown menu component with animations, keyboard navigation, and full accessibility.

## Features

- ‚ú® **Glass Effect** - Backdrop blur with smooth animations
- ‚å®Ô∏è **Keyboard Navigation** - Arrow keys, Enter, ESC support
- üéØ **Auto Positioning** - Smart placement with collision detection
- ‚ôø **WCAG 2.1 AA** - Full ARIA menu pattern
- üîç **Nested Menus** - Support for submenus
- üì± **Touch Friendly** - Optimized for mobile

## Installation

```bash
npx shadcn@latest add @shadcn-glass-ui/dropdown
```

## Usage

<Canvas of={DropdownGlassStories.Default} />

```tsx
import { DropdownGlass } from '@/components/glass/ui/dropdown-glass';
import { ButtonGlass } from '@/components/glass/ui/button-glass';

function Demo() {
  return (
    <DropdownGlass
      trigger={<ButtonGlass>Open Menu</ButtonGlass>}
      items={[
        { label: 'Profile', onClick: () => console.log('Profile') },
        { label: 'Settings', onClick: () => console.log('Settings') },
        { type: 'separator' },
        { label: 'Logout', onClick: () => console.log('Logout'), variant: 'danger' },
      ]}
    />
  );
}
```

## API Reference

<ArgTypes of={DropdownGlassStories} />

## Menu Items

### Basic Item

```tsx
{
  label: 'Profile',
  onClick: () => navigate('/profile'),
  icon: <User className="w-4 h-4" />
}
```

### With Keyboard Shortcut

```tsx
{
  label: 'Save',
  onClick: handleSave,
  shortcut: '‚åòS'
}
```

### Disabled Item

```tsx
{
  label: 'Delete',
  onClick: handleDelete,
  disabled: true
}
```

### Separator

```tsx
{
  type: 'separator'
}
```

### Danger Item

```tsx
{
  label: 'Delete Account',
  onClick: handleDelete,
  variant: 'danger'
}
```

## Examples

### User Menu

```tsx
import { User, Settings, HelpCircle, LogOut } from 'lucide-react';

<DropdownGlass
  trigger={
    <ButtonGlass variant="ghost" size="icon">
      <User className="w-5 h-5" />
    </ButtonGlass>
  }
  items={[
    {
      label: 'Profile',
      icon: <User className="w-4 h-4" />,
      onClick: () => navigate('/profile')
    },
    {
      label: 'Settings',
      icon: <Settings className="w-4 h-4" />,
      onClick: () => navigate('/settings'),
      shortcut: '‚åò,'
    },
    { type: 'separator' },
    {
      label: 'Help',
      icon: <HelpCircle className="w-4 h-4" />,
      onClick: () => window.open('/help')
    },
    { type: 'separator' },
    {
      label: 'Logout',
      icon: <LogOut className="w-4 h-4" />,
      onClick: handleLogout,
      variant: 'danger'
    }
  ]}
/>
```

### Context Menu

```tsx
function FileItem({ file }) {
  return (
    <DropdownGlass
      trigger={
        <div className="p-3 rounded-lg hover:bg-white/5 cursor-pointer">
          {file.name}
        </div>
      }
      items={[
        { label: 'Open', onClick: () => open(file) },
        { label: 'Rename', onClick: () => rename(file), shortcut: 'F2' },
        { label: 'Download', onClick: () => download(file) },
        { type: 'separator' },
        { label: 'Delete', onClick: () => delete(file), variant: 'danger' }
      ]}
    />
  );
}
```

## Keyboard Navigation

| Key | Action |
|-----|--------|
| **‚Üì** | Next item |
| **‚Üë** | Previous item |
| **Enter** | Select item |
| **ESC** | Close menu |
| **Tab** | Close and move focus |

## Accessibility

- **ARIA**: `role="menu"`, `aria-expanded`, `aria-haspopup`
- **Focus Management**: Auto-focus first item
- **Keyboard Support**: Full arrow key navigation

## Related Components

- [ModalGlass](/?path=/docs/components-modalglass--docs) - Modal dialogs
- [TooltipGlass](/?path=/docs/components-tooltipglass--docs) - Contextual hints

View source: [dropdown-glass.tsx](https://github.com/yourusername/shadcn-glass-ui/blob/main/src/components/glass/ui/dropdown-glass.tsx)
