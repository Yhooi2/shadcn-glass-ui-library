{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "sort-dropdown-glass",
  "type": "registry:component",
  "title": "Sort Dropdown Glass",
  "description": "Atomic component for sorting controls with:",
  "dependencies": [
    "lucide-react",
    "react"
  ],
  "registryDependencies": [
    "cn",
    "variants"
  ],
  "files": [
    {
      "path": "components/glass/atomic/sort-dropdown-glass.tsx",
      "type": "registry:component",
      "content": "/**\n * SortDropdownGlass Component\n *\n * Atomic component for sorting controls with:\n * - Theme-aware glass styling\n * - Responsive design (compact/full mode)\n * - Sort field selection (commits, stars, name, contribution)\n * - Sort order toggle (asc/desc)\n */\n\nimport { forwardRef, useState, useRef, useEffect, useCallback, useMemo, type CSSProperties } from 'react';\nimport { ChevronDown, ArrowUp, ArrowDown, Check } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { getDropdownContentStyles } from '@/lib/variants/dropdown-content-styles';\nimport { ICON_SIZES } from '../primitives/style-utils';\nimport '@/glass-theme.css';\n\n// ========================================\n// TYPES\n// ========================================\n\nexport type SortField = 'commits' | 'stars' | 'name' | 'contribution';\nexport type SortOrder = 'asc' | 'desc';\n\n// ========================================\n// FIELD LABELS\n// ========================================\n\nconst fieldLabels: Record<SortField, string> = {\n  commits: 'Commits',\n  stars: 'Stars',\n  name: 'Name',\n  contribution: 'Contribution',\n};\n\n// ========================================\n// PROPS INTERFACE\n// ========================================\n\nexport interface SortDropdownGlassProps extends Omit<React.HTMLAttributes<HTMLDivElement>, 'onChange'> {\n  /** Current sort field */\n  readonly sortBy: SortField;\n  /** Current sort order */\n  readonly sortOrder: SortOrder;\n  /** Callback when sort changes */\n  readonly onSortChange: (field: SortField, order: SortOrder) => void;\n  /** Available sort options (default: all) */\n  readonly options?: readonly SortField[];\n  /** Compact mode for mobile */\n  readonly compact?: boolean;\n}\n\n// ========================================\n// COMPONENT\n// ========================================\n\nexport const SortDropdownGlass = forwardRef<HTMLDivElement, SortDropdownGlassProps>(\n  (\n    {\n      sortBy,\n      sortOrder,\n      onSortChange,\n      options = ['commits', 'stars', 'name', 'contribution'],\n      compact = false,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const [isOpen, setIsOpen] = useState(false);\n    const internalRef = useRef<HTMLDivElement>(null);\n\n    // Close on click outside or escape\n    useEffect(() => {\n      if (!isOpen) return;\n\n      const handleClickOutside = (event: MouseEvent): void => {\n        if (internalRef.current && !internalRef.current.contains(event.target as Node)) {\n          setIsOpen(false);\n        }\n      };\n\n      const handleEscape = (event: KeyboardEvent): void => {\n        if (event.key === 'Escape') {\n          setIsOpen(false);\n        }\n      };\n\n      document.addEventListener('mousedown', handleClickOutside);\n      document.addEventListener('keydown', handleEscape);\n\n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n        document.removeEventListener('keydown', handleEscape);\n      };\n    }, [isOpen]);\n\n    const handleToggle = useCallback(() => {\n      setIsOpen((prev) => !prev);\n    }, []);\n\n    const handleFieldSelect = useCallback((field: SortField) => {\n      if (field === sortBy) {\n        // Toggle order if same field\n        onSortChange(field, sortOrder === 'asc' ? 'desc' : 'asc');\n      } else {\n        // New field, default to desc\n        onSortChange(field, 'desc');\n      }\n      setIsOpen(false);\n    }, [sortBy, sortOrder, onSortChange]);\n\n    const handleKeyDown = (e: React.KeyboardEvent): void => {\n      if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        handleToggle();\n      }\n    };\n\n    // Styles\n    const buttonStyles: CSSProperties = useMemo(() => ({\n      background: 'var(--segmented-container-bg)',\n      border: '1px solid var(--segmented-container-border)',\n      color: 'var(--text-primary)',\n    }), []);\n\n    const dropdownStyles: CSSProperties = useMemo(() => ({\n      ...getDropdownContentStyles(),\n      animation: 'dropdownFadeIn 0.2s ease-out',\n    }), []);\n\n    const SortIcon = sortOrder === 'asc' ? ArrowUp : ArrowDown;\n\n    return (\n      <div\n        ref={(node) => {\n          // Handle both refs\n          (internalRef as React.MutableRefObject<HTMLDivElement | null>).current = node;\n          if (typeof ref === 'function') {\n            ref(node);\n          } else if (ref) {\n            (ref as React.MutableRefObject<HTMLDivElement | null>).current = node;\n          }\n        }}\n        className={cn('relative inline-block', className)}\n        style={{ zIndex: isOpen ? 50000 : 'auto' }}\n        {...props}\n      >\n        {/* Trigger Button */}\n        <button\n          type=\"button\"\n          onClick={handleToggle}\n          onKeyDown={handleKeyDown}\n          className={cn(\n            'flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-xs font-medium transition-all duration-200',\n            'hover:opacity-80 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2',\n            'sm:gap-2 sm:px-4 sm:py-2 sm:text-sm'\n          )}\n          style={buttonStyles}\n          aria-expanded={isOpen}\n          aria-haspopup=\"listbox\"\n        >\n          {compact ? (\n            <>\n              <span>Sort</span>\n              <SortIcon className={ICON_SIZES.sm} style={{ color: 'var(--text-accent)' }} />\n            </>\n          ) : (\n            <>\n              <span className=\"hidden sm:inline\" style={{ color: 'var(--text-muted)' }}>Sort:</span>\n              <span>{fieldLabels[sortBy]}</span>\n              <SortIcon className={ICON_SIZES.sm} style={{ color: 'var(--text-accent)' }} />\n              <ChevronDown\n                className={cn(\n                  ICON_SIZES.sm,\n                  'transition-transform duration-200',\n                  isOpen && 'rotate-180'\n                )}\n                style={{ color: 'var(--text-muted)' }}\n              />\n            </>\n          )}\n        </button>\n\n        {/* Dropdown Menu */}\n        {isOpen && (\n          <>\n            {/* Backdrop */}\n            <div\n              className=\"fixed inset-0\"\n              style={{ zIndex: 50001 }}\n              onClick={() => setIsOpen(false)}\n            />\n            {/* Menu */}\n            <div\n              className=\"absolute left-0 mt-2 min-w-[140px] py-1.5 rounded-xl overflow-hidden\"\n              style={{ ...dropdownStyles, zIndex: 50002 }}\n              role=\"listbox\"\n              aria-label=\"Sort options\"\n            >\n              {options.map((field) => {\n                const isSelected = field === sortBy;\n                return (\n                  <button\n                    key={field}\n                    type=\"button\"\n                    onClick={() => handleFieldSelect(field)}\n                    className={cn(\n                      'w-full px-3 py-2 text-xs sm:text-sm text-left flex items-center justify-between gap-2',\n                      'transition-colors duration-150 hover:bg-white/5'\n                    )}\n                    style={{\n                      color: isSelected ? 'var(--text-accent)' : 'var(--text-primary)',\n                      background: isSelected ? 'var(--dropdown-item-hover)' : 'transparent',\n                    }}\n                    role=\"option\"\n                    aria-selected={isSelected}\n                  >\n                    <span className=\"font-medium\">{fieldLabels[field]}</span>\n                    {isSelected && (\n                      <div className=\"flex items-center gap-1\">\n                        {sortOrder === 'asc' ? (\n                          <ArrowUp className={ICON_SIZES.sm} />\n                        ) : (\n                          <ArrowDown className={ICON_SIZES.sm} />\n                        )}\n                        <Check className={ICON_SIZES.sm} />\n                      </div>\n                    )}\n                  </button>\n                );\n              })}\n            </div>\n          </>\n        )}\n      </div>\n    );\n  }\n);\n\nSortDropdownGlass.displayName = 'SortDropdownGlass';\n"
    }
  ],
  "categories": [
    "atomic"
  ]
}