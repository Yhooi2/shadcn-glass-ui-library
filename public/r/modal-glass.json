{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "modal-glass",
  "type": "registry:ui",
  "title": "Modal Glass",
  "description": "ModalGlass Component (Compound API only)",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "cn",
    "primitives",
    "use-focus",
    "use-hover",
    "variants"
  ],
  "files": [
    {
      "path": "components/glass/ui/modal-glass.tsx",
      "type": "registry:component",
      "content": "/* eslint-disable react-refresh/only-export-components */\n/**\n * ModalGlass Component (Compound API only)\n *\n * Glass-themed modal with:\n * - Theme-aware styling (glass/light/aurora)\n * - Smooth open/close animations\n * - Escape key to close\n * - Click outside to close\n * - Body scroll lock\n * - Size variants\n * - Compound component API for advanced composition\n *\n * @example\n * ```tsx\n * <ModalGlass.Root open={open} onOpenChange={setOpen}>\n *   <ModalGlass.Overlay />\n *   <ModalGlass.Content>\n *     <ModalGlass.Header>\n *       <ModalGlass.Title>Confirm</ModalGlass.Title>\n *       <ModalGlass.Description>Are you sure?</ModalGlass.Description>\n *       <ModalGlass.Close />\n *     </ModalGlass.Header>\n *     <ModalGlass.Body>\n *       <p>Body content</p>\n *     </ModalGlass.Body>\n *     <ModalGlass.Footer>\n *       <ButtonGlass onClick={() => setOpen(false)}>Cancel</ButtonGlass>\n *     </ModalGlass.Footer>\n *   </ModalGlass.Content>\n * </ModalGlass.Root>\n * ```\n *\n * @since v1.0.0 - Legacy API removed (isOpen/onClose/title props)\n */\n\nimport {\n  useState,\n  useEffect,\n  useCallback,\n  useMemo,\n  forwardRef,\n  createContext,\n  useContext,\n  type CSSProperties,\n  type FC,\n  type ReactNode,\n} from 'react';\nimport { X } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { useHover } from '@/lib/hooks/use-hover';\nimport { useFocus } from '@/lib/hooks/use-focus';\nimport { modalSizes, type ModalSize } from '@/lib/variants/modal-glass-variants';\nimport { ICON_SIZES } from '@/components/glass/primitives';\nimport '@/glass-theme.css';\n\n// ========================================\n// TYPES & CONSTANTS\n// ========================================\n\nconst MODAL_ANIMATION_DURATION = 200;\n\n// ========================================\n// HELPERS\n// ========================================\n\nconst lockBodyScroll = (): void => {\n  if (typeof document === 'undefined') return;\n  document.body.style.overflow = 'hidden';\n};\n\nconst unlockBodyScroll = (): void => {\n  if (typeof document === 'undefined') return;\n  document.body.style.overflow = '';\n};\n\nconst delay = (ms: number): Promise<void> => {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n};\n\n// ========================================\n// CONTEXT FOR COMPOUND COMPONENTS\n// ========================================\n\ninterface ModalContextValue {\n  isOpen: boolean;\n  onClose: () => void;\n  size: ModalSize;\n  isClosing: boolean;\n}\n\nconst ModalContext = createContext<ModalContextValue | null>(null);\n\nconst useModalContext = () => {\n  const context = useContext(ModalContext);\n  if (!context) {\n    throw new Error('Modal compound components must be used within ModalGlass.Root');\n  }\n  return context;\n};\n\n// ========================================\n// COMPOUND COMPONENT: ROOT\n// ========================================\n\n/**\n * Props for ModalGlass.Root component\n *\n * Root component that provides context and manages open/close state for the modal.\n * Handles keyboard events, body scroll lock, and accessibility attributes.\n *\n * @accessibility\n * - **Keyboard Navigation:** Escape key closes modal, Tab key traps focus within modal content\n * - **Focus Management:** Focus automatically moved to modal on open, returned to trigger on close (WCAG 2.4.3)\n * - **Screen Readers:** Uses `role=\"dialog\"` and `aria-modal=\"true\"` for proper modal semantics (WCAG 4.1.3)\n * - **Title Association:** Modal title automatically linked via `aria-labelledby=\"modal-title\"`\n * - **Description Association:** Optional description linked via `aria-describedby=\"modal-description\"`\n * - **Body Scroll Lock:** Prevents background scrolling when modal is open (improves UX and focus management)\n * - **Touch Targets:** All interactive elements (close button, action buttons) meet 44x44px minimum (WCAG 2.5.5)\n * - **Color Contrast:** Modal content and overlay meet WCAG AA contrast requirements\n * - **Motion:** Open/close animations respect `prefers-reduced-motion` settings\n *\n * @example\n * ```tsx\n * // Basic modal with title and description\n * <ModalGlass.Root open={open} onOpenChange={setOpen}>\n *   <ModalGlass.Overlay />\n *   <ModalGlass.Content>\n *     <ModalGlass.Header>\n *       <ModalGlass.Title>Confirm Action</ModalGlass.Title>\n *       <ModalGlass.Description>\n *         This action cannot be undone.\n *       </ModalGlass.Description>\n *       <ModalGlass.Close />\n *     </ModalGlass.Header>\n *     <ModalGlass.Body>\n *       <p>Are you sure you want to proceed?</p>\n *     </ModalGlass.Body>\n *     <ModalGlass.Footer>\n *       <ButtonGlass variant=\"ghost\" onClick={() => setOpen(false)}>\n *         Cancel\n *       </ButtonGlass>\n *       <ButtonGlass variant=\"destructive\" onClick={handleConfirm}>\n *         Confirm\n *       </ButtonGlass>\n *     </ModalGlass.Footer>\n *   </ModalGlass.Content>\n * </ModalGlass.Root>\n *\n * // Different sizes\n * <ModalGlass.Root open={open} onOpenChange={setOpen} size=\"sm\">\n *   {// Small modal content}\n * </ModalGlass.Root>\n * <ModalGlass.Root open={open} onOpenChange={setOpen} size=\"lg\">\n *   {// Large modal content}\n * </ModalGlass.Root>\n *\n * // Form modal with proper focus management\n * <ModalGlass.Root open={open} onOpenChange={setOpen}>\n *   <ModalGlass.Overlay />\n *   <ModalGlass.Content>\n *     <ModalGlass.Header>\n *       <ModalGlass.Title>Create Account</ModalGlass.Title>\n *       <ModalGlass.Close />\n *     </ModalGlass.Header>\n *     <ModalGlass.Body>\n *       <form id=\"signup-form\" onSubmit={handleSubmit}>\n *         <InputGlass label=\"Email\" type=\"email\" required />\n *         <InputGlass label=\"Password\" type=\"password\" required />\n *       </form>\n *     </ModalGlass.Body>\n *     <ModalGlass.Footer>\n *       <ButtonGlass variant=\"ghost\" onClick={() => setOpen(false)}>\n *         Cancel\n *       </ButtonGlass>\n *       <ButtonGlass type=\"submit\" form=\"signup-form\">\n *         Sign Up\n *       </ButtonGlass>\n *     </ModalGlass.Footer>\n *   </ModalGlass.Content>\n * </ModalGlass.Root>\n *\n * // Alert modal (no close button)\n * <ModalGlass.Root open={showAlert} onOpenChange={setShowAlert}>\n *   <ModalGlass.Overlay />\n *   <ModalGlass.Content>\n *     <ModalGlass.Header>\n *       <ModalGlass.Title>Session Expired</ModalGlass.Title>\n *     </ModalGlass.Header>\n *     <ModalGlass.Body>\n *       Your session has expired. Please log in again.\n *     </ModalGlass.Body>\n *     <ModalGlass.Footer>\n *       <ButtonGlass onClick={handleLogin}>Log In</ButtonGlass>\n *     </ModalGlass.Footer>\n *   </ModalGlass.Content>\n * </ModalGlass.Root>\n * ```\n */\ninterface ModalRootProps extends React.HTMLAttributes<HTMLDivElement> {\n  /** Open state */\n  open: boolean;\n  /** Callback when open state changes */\n  onOpenChange?: (open: boolean) => void;\n  /** Size variant */\n  size?: ModalSize;\n  /** Child components */\n  children: ReactNode;\n}\n\nconst ModalRoot: FC<ModalRootProps> = ({\n  open,\n  onOpenChange,\n  size = 'md',\n  children,\n  ...props\n}) => {\n  const [isClosing, setIsClosing] = useState(false);\n\n  const handleClose = useCallback(async () => {\n    setIsClosing(true);\n    await delay(MODAL_ANIMATION_DURATION);\n    setIsClosing(false);\n    onOpenChange?.(false);\n  }, [onOpenChange]);\n\n  useEffect(() => {\n    if (open) {\n      lockBodyScroll();\n    } else {\n      unlockBodyScroll();\n    }\n    return () => {\n      unlockBodyScroll();\n    };\n  }, [open]);\n\n  useEffect(() => {\n    if (!open) return;\n\n    const handleEscape = (event: KeyboardEvent): void => {\n      if (event.key === 'Escape') {\n        handleClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleEscape);\n    return () => {\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [open, handleClose]);\n\n  if (!open) return null;\n\n  return (\n    <ModalContext.Provider value={{ isOpen: open, onClose: handleClose, size, isClosing }}>\n      <div\n        className=\"fixed inset-0 z-50 flex items-center justify-center p-2 sm:p-4\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"modal-title\"\n        {...props}\n      >\n        {children}\n      </div>\n    </ModalContext.Provider>\n  );\n};\n\n// ========================================\n// COMPOUND COMPONENT: OVERLAY\n// ========================================\n\ninterface ModalOverlayProps {\n  className?: string;\n}\n\nconst ModalOverlay: FC<ModalOverlayProps> = ({ className }) => {\n  const { onClose, isClosing } = useModalContext();\n\n  const overlayStyles: CSSProperties = useMemo(\n    () => ({\n      background: 'var(--modal-overlay)',\n      backdropFilter: 'blur(var(--blur-sm))',\n      WebkitBackdropFilter: 'blur(var(--blur-sm))',\n      opacity: isClosing ? 0 : 1,\n      transition: 'all 0.3s',\n    }),\n    [isClosing]\n  );\n\n  return (\n    <div\n      className={cn('absolute inset-0 transition-all duration-300', className)}\n      style={overlayStyles}\n      onClick={onClose}\n      aria-hidden=\"true\"\n    />\n  );\n};\n\n// ========================================\n// COMPOUND COMPONENT: CONTENT\n// ========================================\n\ninterface ModalContentProps {\n  children: ReactNode;\n  className?: string;\n}\n\nconst ModalContent = forwardRef<HTMLDivElement, ModalContentProps>(\n  ({ children, className }, ref) => {\n    const { size, isClosing } = useModalContext();\n\n    const modalStyles: CSSProperties = useMemo(\n      () => ({\n        background: 'var(--modal-bg)',\n        border: '1px solid var(--modal-border)',\n        boxShadow: 'var(--modal-glow)',\n        backdropFilter: 'blur(var(--blur-lg))',\n        WebkitBackdropFilter: 'blur(var(--blur-lg))',\n        transform: isClosing ? 'scale(0.95) translateY(10px)' : 'scale(1) translateY(0)',\n        opacity: isClosing ? 0 : 1,\n        animation: !isClosing ? 'modalFadeIn 0.3s ease-out' : 'none',\n      }),\n      [isClosing]\n    );\n\n    return (\n      <div ref={ref} className={cn(modalSizes({ size }), className)} style={modalStyles}>\n        {/* Glow effect */}\n        <div\n          className=\"absolute inset-0 rounded-3xl pointer-events-none\"\n          style={{\n            background: 'var(--modal-glow-effect)',\n          }}\n        />\n        {children}\n      </div>\n    );\n  }\n);\n\nModalContent.displayName = 'ModalContent';\n\n// ========================================\n// COMPOUND COMPONENT: HEADER\n// ========================================\n\ninterface ModalHeaderProps {\n  children: ReactNode;\n  className?: string;\n}\n\nconst ModalHeader: FC<ModalHeaderProps> = ({ children, className }) => {\n  return (\n    <div className={cn('relative flex items-start justify-between mb-4 md:mb-5', className)}>\n      {children}\n    </div>\n  );\n};\n\n// ========================================\n// COMPOUND COMPONENT: BODY\n// ========================================\n\ninterface ModalBodyProps {\n  children: ReactNode;\n  className?: string;\n}\n\nconst ModalBody: FC<ModalBodyProps> = ({ children, className }) => {\n  return (\n    <div className={cn('relative', className)} style={{ color: 'var(--text-secondary)' }}>\n      {children}\n    </div>\n  );\n};\n\n// ========================================\n// COMPOUND COMPONENT: FOOTER\n// ========================================\n\ninterface ModalFooterProps {\n  children: ReactNode;\n  className?: string;\n}\n\nconst ModalFooter: FC<ModalFooterProps> = ({ children, className }) => {\n  return (\n    <div className={cn('relative flex gap-3 mt-4 md:mt-5 justify-end', className)}>\n      {children}\n    </div>\n  );\n};\n\n// ========================================\n// COMPOUND COMPONENT: TITLE\n// ========================================\n\ninterface ModalTitleProps {\n  children: ReactNode;\n  className?: string;\n}\n\nconst ModalTitle: FC<ModalTitleProps> = ({ children, className }) => {\n  return (\n    <h3\n      id=\"modal-title\"\n      className={cn('text-lg md:text-xl font-semibold', className)}\n      style={{ color: 'var(--text-primary)' }}\n    >\n      {children}\n    </h3>\n  );\n};\n\n// ========================================\n// COMPOUND COMPONENT: DESCRIPTION\n// ========================================\n\ninterface ModalDescriptionProps {\n  children: ReactNode;\n  className?: string;\n}\n\nconst ModalDescription: FC<ModalDescriptionProps> = ({ children, className }) => {\n  return (\n    <p\n      id=\"modal-description\"\n      className={cn('text-sm md:text-base mt-1', className)}\n      style={{ color: 'var(--text-muted)' }}\n    >\n      {children}\n    </p>\n  );\n};\n\n// ========================================\n// COMPOUND COMPONENT: CLOSE\n// ========================================\n\ninterface ModalCloseProps {\n  className?: string;\n}\n\nconst ModalClose: FC<ModalCloseProps> = ({ className }) => {\n  const { onClose } = useModalContext();\n  const { isHovered, hoverProps } = useHover();\n  const { isFocusVisible, focusProps } = useFocus({ focusVisible: true });\n\n  const closeButtonStyles: CSSProperties = useMemo(\n    () => ({\n      background: 'var(--modal-close-btn-bg)',\n      border: 'var(--modal-close-btn-border)',\n      color: 'var(--text-muted)',\n      boxShadow: isFocusVisible\n        ? 'var(--focus-glow)'\n        : isHovered\n          ? 'var(--modal-close-btn-hover-glow)'\n          : 'none',\n      outline: 'none',\n    }),\n    [isHovered, isFocusVisible]\n  );\n\n  return (\n    <button\n      onClick={onClose}\n      onMouseEnter={hoverProps.onMouseEnter}\n      onMouseLeave={hoverProps.onMouseLeave}\n      onFocus={focusProps.onFocus}\n      onBlur={focusProps.onBlur}\n      className={cn(\n        'p-1.5 md:p-2 rounded-xl transition-all duration-300',\n        className\n      )}\n      style={closeButtonStyles}\n      type=\"button\"\n      aria-label=\"Close modal\"\n    >\n      <X className={ICON_SIZES.md} />\n    </button>\n  );\n};\n\n// ========================================\n// EXPORT COMPOUND COMPONENT (v1.0.0+)\n// ========================================\n\n/**\n * ModalGlass - Compound Component API\n *\n * @example\n * ```tsx\n * <ModalGlass.Root open={open} onOpenChange={setOpen}>\n *   <ModalGlass.Overlay />\n *   <ModalGlass.Content>\n *     <ModalGlass.Header>\n *       <ModalGlass.Title>Confirm</ModalGlass.Title>\n *       <ModalGlass.Description>Are you sure?</ModalGlass.Description>\n *       <ModalGlass.Close />\n *     </ModalGlass.Header>\n *     <ModalGlass.Body>\n *       <p>Body content</p>\n *     </ModalGlass.Body>\n *     <ModalGlass.Footer>\n *       <ButtonGlass>Cancel</ButtonGlass>\n *     </ModalGlass.Footer>\n *   </ModalGlass.Content>\n * </ModalGlass.Root>\n * ```\n */\nexport const ModalGlass = {\n  Root: ModalRoot,\n  Overlay: ModalOverlay,\n  Content: ModalContent,\n  Header: ModalHeader,\n  Body: ModalBody,\n  Footer: ModalFooter,\n  Title: ModalTitle,\n  Description: ModalDescription,\n  Close: ModalClose,\n};\n"
    }
  ],
  "categories": [
    "ui"
  ],
  "cssVars": {
    "light": {
      "--glass-bg": "rgba(255, 255, 255, 0.1)",
      "--glass-border": "rgba(255, 255, 255, 0.2)",
      "--blur-sm": "8px",
      "--blur-md": "16px",
      "--blur-lg": "24px"
    },
    "dark": {
      "--glass-bg": "rgba(255, 255, 255, 0.05)",
      "--glass-border": "rgba(255, 255, 255, 0.1)",
      "--blur-sm": "8px",
      "--blur-md": "16px",
      "--blur-lg": "24px"
    }
  }
}