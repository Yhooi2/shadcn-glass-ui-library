import { Meta, Canvas, ArgTypes, Source, Controls } from '@storybook/blocks';
import * as CheckboxGlassStories from '../../src/components/CheckboxGlass.stories';

<Meta of={CheckboxGlassStories} />

# CheckboxGlass

Glassmorphism checkbox component with smooth animations and full accessibility support.

## Features

- ‚ú® **Glass Effect** - Glassmorphism styling with backdrop blur
- ‚úÖ **Smooth Animation** - Check mark animation on toggle
- üì± **Touch Optimized** - 44√ó44px touch target wrapper
- ‚ôø **WCAG 2.1 AA** - Full keyboard navigation and screen reader support
- üé® **Theme Support** - Glass, light, aurora themes
- üîÑ **Indeterminate State** - Support for tri-state checkbox

## Installation

```bash
npx shadcn@latest add @shadcn-glass-ui/checkbox
```

## Usage

### Basic Example

<Canvas of={CheckboxGlassStories.Default} />

```tsx
import { CheckboxGlass } from '@/components/glass/ui/checkbox-glass';

export default function Demo() {
  return (
    <CheckboxGlass
      id="terms"
      label="I agree to terms and conditions"
    />
  );
}
```

## API Reference

<ArgTypes of={CheckboxGlassStories} />

## Design Tokens

| Token | Value | Notes |
|-------|-------|-------|
| **Visual Size** | 20-24px | Checkbox visible area |
| **Touch Target** | 44√ó44px | Apple HIG minimum |
| **Border Radius** | 6px (rounded-md) | Subtle rounded corners |
| **Checkmark** | SVG icon | Smooth animation |
| **Focus Ring** | 2px offset | WCAG 2.1 AA compliant |

## States

### Unchecked

```tsx
<CheckboxGlass
  id="newsletter"
  label="Subscribe to newsletter"
  checked={false}
/>
```

### Checked

<Canvas of={CheckboxGlassStories.Checked} />

```tsx
<CheckboxGlass
  id="newsletter"
  label="Subscribe to newsletter"
  checked={true}
/>
```

### Indeterminate

```tsx
<CheckboxGlass
  id="select-all"
  label="Select all items"
  indeterminate={true}
/>
```

### Disabled

<Canvas of={CheckboxGlassStories.Disabled} />

```tsx
<CheckboxGlass
  id="disabled"
  label="This option is disabled"
  disabled={true}
/>
```

## Accessibility

### Keyboard Navigation

| Key | Action |
|-----|--------|
| **Tab** | Focus checkbox |
| **Space** | Toggle checked state |
| **Shift+Tab** | Focus previous element |

### Screen Reader Support

```tsx
<CheckboxGlass
  id="marketing"
  label="Send me marketing emails"
  aria-describedby="marketing-description"
/>
<p id="marketing-description" className="text-sm opacity-60">
  We'll send you updates about new features and promotions
</p>
```

### Required Fields

```tsx
<CheckboxGlass
  id="terms"
  label="I agree to the terms"
  required
  aria-required="true"
/>
```

## Form Integration

### Controlled Component

```tsx
import { useState } from 'react';

function SettingsForm() {
  const [notifications, setNotifications] = useState(false);

  return (
    <CheckboxGlass
      id="notifications"
      label="Enable notifications"
      checked={notifications}
      onCheckedChange={setNotifications}
    />
  );
}
```

### Multiple Checkboxes

```tsx
function PreferencesForm() {
  const [preferences, setPreferences] = useState({
    email: false,
    sms: false,
    push: false,
  });

  return (
    <div className="space-y-3">
      <CheckboxGlass
        id="email"
        label="Email notifications"
        checked={preferences.email}
        onCheckedChange={(checked) =>
          setPreferences(prev => ({ ...prev, email: checked }))
        }
      />

      <CheckboxGlass
        id="sms"
        label="SMS notifications"
        checked={preferences.sms}
        onCheckedChange={(checked) =>
          setPreferences(prev => ({ ...prev, sms: checked }))
        }
      />

      <CheckboxGlass
        id="push"
        label="Push notifications"
        checked={preferences.push}
        onCheckedChange={(checked) =>
          setPreferences(prev => ({ ...prev, push: checked }))
        }
      />
    </div>
  );
}
```

### Select All Pattern

```tsx
function SelectAllExample() {
  const [items, setItems] = useState([
    { id: 1, checked: false },
    { id: 2, checked: false },
    { id: 3, checked: false },
  ]);

  const allChecked = items.every(item => item.checked);
  const someChecked = items.some(item => item.checked);

  return (
    <div className="space-y-3">
      <CheckboxGlass
        id="select-all"
        label="Select all"
        checked={allChecked}
        indeterminate={someChecked && !allChecked}
        onCheckedChange={(checked) =>
          setItems(items.map(item => ({ ...item, checked })))
        }
      />

      <div className="ml-6 space-y-2">
        {items.map(item => (
          <CheckboxGlass
            key={item.id}
            id={`item-${item.id}`}
            label={`Item ${item.id}`}
            checked={item.checked}
            onCheckedChange={(checked) =>
              setItems(prev =>
                prev.map(i => i.id === item.id ? { ...i, checked } : i)
              )
            }
          />
        ))}
      </div>
    </div>
  );
}
```

## Best Practices

### ‚úÖ Do

- Always provide a visible label
- Use for binary choices (on/off)
- Group related checkboxes
- Use clear, concise label text
- Maintain 44√ó44px touch targets
- Show validation errors clearly

### ‚ùå Don't

- Don't use for mutually exclusive options (use radio buttons)
- Don't make labels too long
- Don't nest checkboxes too deeply
- Don't use as a substitute for toggle switches
- Don't disable without explanation

## Examples

### Terms Agreement

```tsx
<form className="space-y-4">
  <CheckboxGlass
    id="terms"
    label="I agree to the Terms of Service"
    required
  />

  <CheckboxGlass
    id="privacy"
    label="I agree to the Privacy Policy"
    required
  />

  <CheckboxGlass
    id="marketing"
    label="Send me promotional emails (optional)"
  />

  <ButtonGlass type="submit">
    Create Account
  </ButtonGlass>
</form>
```

### Filter Panel

```tsx
function FilterPanel() {
  const [filters, setFilters] = useState({
    inStock: false,
    onSale: false,
    freeShipping: false,
  });

  return (
    <div className="space-y-3">
      <h3 className="font-semibold mb-2">Filters</h3>

      <CheckboxGlass
        id="in-stock"
        label="In Stock"
        checked={filters.inStock}
        onCheckedChange={(checked) =>
          setFilters(prev => ({ ...prev, inStock: checked }))
        }
      />

      <CheckboxGlass
        id="on-sale"
        label="On Sale"
        checked={filters.onSale}
        onCheckedChange={(checked) =>
          setFilters(prev => ({ ...prev, onSale: checked }))
        }
      />

      <CheckboxGlass
        id="free-shipping"
        label="Free Shipping"
        checked={filters.freeShipping}
        onCheckedChange={(checked) =>
          setFilters(prev => ({ ...prev, freeShipping: checked }))
        }
      />
    </div>
  );
}
```

## Theme Support

```tsx
// Glass theme
<div className="theme-glass">
  <CheckboxGlass label="Glass theme" />
</div>

// Light theme
<div className="theme-light">
  <CheckboxGlass label="Light theme" />
</div>

// Aurora theme
<div className="theme-aurora">
  <CheckboxGlass label="Aurora theme" />
</div>
```

## Related Components

- [ToggleGlass](/?path=/docs/components-toggleglass--docs) - For on/off switches
- [RadioGlass](/?path=/docs/components-radioglass--docs) - For exclusive choices
- [ButtonGlass](/?path=/docs/components-buttonglass--docs) - For actions

## Technical Implementation

Built with:
- **Radix UI Checkbox** - Accessible primitive
- **Tailwind CSS** - Styling and animations
- **CVA** - Variant management
- **TypeScript** - Full type safety

View source: [checkbox-glass.tsx](https://github.com/yourusername/shadcn-glass-ui/blob/main/src/components/glass/ui/checkbox-glass.tsx)
